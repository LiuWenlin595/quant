## 策略概述
这是一个**“市场温度计”**策略。它不是用来告诉你具体买哪一只股票，而是用来告诉你**现在整个市场（或某个行业）是冷还是热**。它通过统计有多少只股票处于上涨趋势，来帮你判断现在是该进场还是该休息。

## 策略的核心思路
这个策略背后的想法非常朴素：**“大河有水小河满”**。

如果市场上绝大多数股票都在涨，说明市场环境很好（牛市），这时候你买股票赚钱的概率就大；如果绝大多数股票都在跌，说明市场环境很差（熊市），这时候买股票很容易亏钱。

这个策略就是通过**数数**，看看市场上到底有多少股票是“及格”的，以此来给市场打分。

## 具体操作步骤

### 第一步：设定“及格线”（判断标准）
首先，我们要给股票定一个标准，什么样的股票算“表现好”？
这个策略使用了一个非常经典的指标：**20日均线（MA20）**。

*   **什么是20日均线？** 就是过去20个交易日（大约一个月）大家的平均买入成本。
*   **判断逻辑：**
    *   如果**今天的价格 > 20日均线**：说明现在的价格比过去一个月的平均成本高，大家都在赚钱，趋势是向上的。我们判定这只股票**“及格”**。
    *   如果**今天的价格 < 20日均线**：说明现在的价格比过去一个月的平均成本低，大家被套住了，趋势是向下的。我们判定这只股票**“不及格”**。

### 第二步：全班大点名（计算及格率）
有了及格线，策略就开始对市场上的股票进行“点名”：

1.  **分行业点名**：比如“银行行业”有100只股票，策略会数一数，里面有多少只是“及格”的。如果80只及格，那银行板块的得分就是80分（80%）。
2.  **全校点名**：策略也会统计市场上所有股票，看看整体有多少比例是“及格”的。

### 第三步：画出“热力图”（观察结果）
代码的最后部分是画图。它把计算出来的分数画成了一张**热力图**（就像气温图一样）：
*   **颜色越暖（红色/橙色）**：说明及格的股票很多，市场很热，大家都在涨。
*   **颜色越冷（蓝色/绿色）**：说明及格的股票很少，市场很冷，大家都在跌。

虽然代码没有直接写出“自动买卖”的指令，但作为一个交易者，你会这样操作：
*   **买入时机**：当看到热力图变红，或者整体及格率很高（比如超过50%或80%）时，说明市场趋势向上，适合进场。
*   **卖出时机**：当看到热力图变冷，及格率大幅下降时，说明市场开始走弱，适合卖出避险。

## 使用的工具/指标

在这个策略中，只用到了一个最基础的工具：

**移动平均线 (MA - Moving Average)**
*   **通俗解释**：你可以把它理解为**“大众心理底线”**。
*   **为什么用它**：代码里用的是**20日均线**。因为一个月大约有20-22个交易日，所以这代表了**最近一个月**的市场平均水平。
    *   股价站在它上面，说明最近买的人都赚钱，市场情绪乐观。
    *   股价掉到它下面，说明最近买的人都亏钱，市场情绪悲观。

## 风险控制

虽然代码主要是用来分析和画图的，但它本身就蕴含了风险控制的思想：

1.  **顺势而为**：它不让你在市场大跌的时候去“接飞刀”。只有当大部分股票都开始上涨（及格率上升）时，它才会发出积极的信号。
2.  **避免单一风险**：它不看某一只股票的脸色，而是看整个行业或整个市场的脸色。这样可以避免你因为看错了一只股票而误判大局。

## 总结

这个策略就像是给股市做了一次**“全身体检”**。

它不关心某一只股票的故事，它只关心一个简单的事实：**现在的价格是不是比过去一个月的平均价高？**
*   如果是，就加1分。
*   最后算出总分。

通过观察这个总分（及格率），你就能一眼看穿市场现在是强还是弱，从而决定是该大胆买入，还是空仓观望。这是一个非常适合初学者用来**感知市场大势**的工具。