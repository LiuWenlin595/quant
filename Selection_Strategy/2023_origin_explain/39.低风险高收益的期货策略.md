你好！我是你的量化策略解说员。

我已经仔细阅读了你提供的代码。这是一个针对**期货市场**（也就是买卖原材料，比如钢铁、玻璃、沥青等）的交易策略。

别被代码吓到了，这个策略的核心逻辑其实非常简单，就像是在海边冲浪：**等一个大浪打过来，跳上去，浪头没了就赶紧下来。**

下面我为你详细拆解这个策略是怎么赚钱的。

---

## 策略概述
这是一个**“追涨”**策略。它专门寻找那些价格突然突破近期最高点的商品，买入并持有，直到价格开始下跌或者赚够了就跑。

*注意：虽然期货可以买涨也可以买跌，但这段代码里“买跌”的部分被注释掉了（关闭了），所以它目前只做**买涨**（赌价格上涨）的交易。*

## 策略的核心思路
这个策略的想法是：**“强者恒强”**。

如果一个商品的价格打破了过去20天的最高纪录，而且最近几天一直在涨，那么它很可能会继续涨下去。这就像一辆车如果已经加速冲起来了，很难马上停下来，我们要做的就是顺着它的方向搭个便车。

## 具体操作步骤

### 第一步：选股（其实是选“期货品种”）
策略并不是什么都买，它挑选了几个特定的“主力队员”进行监控。
根据代码，它主要关注以下7种商品：
1.  **沥青** (BU)
2.  **螺纹钢** (RB)
3.  **玻璃** (FG)
4.  **PTA** (TA - 一种化工原料)
5.  **焦炭** (J)
6.  **棕榈油** (P)
7.  **白银** (AG)

**逻辑：** 每天开盘时，策略会盯着这7个商品看。

### 第二步：买入（什么时候上车？）
策略非常谨慎，只有当一个商品**同时满足**以下3个条件时，才会买入：

1.  **打破纪录**：现在的价格，必须超过过去20天里的最高价。
    *   *含义：说明价格突破了，可能要开启一波大涨。*
2.  **涨多跌少**：过去20天里，开盘和收盘上涨的天数占比要超过60%。
    *   *含义：说明最近的趋势整体是向上的，不是偶尔一下的假动作。*
3.  **近期猛冲**：最近3天的价格涨幅超过了1.5%。
    *   *含义：说明短期爆发力很强。*

**简单说：** 只有当一个商品长期趋势好、短期爆发力强、且价格创了新高，策略才会买入。

### 第三步：卖出（什么时候下车？）
买入后，策略会时刻盯着，一旦出现以下**任意一种**情况，就会立刻卖出：

1.  **趋势变坏**：过去20天里，上涨的天数变少了（占比低于45%）。
    *   *含义：上涨的动力不足了。*
2.  **止损（亏钱离场）**：价格比买入价跌了3%。
    *   *含义：认输，保住本金，防止亏大钱。*
3.  **止盈（赚钱离场）**：价格比买入价涨了15%。
    *   *含义：赚够了，落袋为安。*
4.  **跌破支撑**：价格跌到了过去20天的最低价。
    *   *含义：趋势彻底反转了，必须跑。*
5.  **高位回落**：价格从最近的最高点回撤了8%。
    *   *含义：虽然还没亏，但涨势好像结束了，先出来再说。*

## 使用的工具/指标

策略里用到了一些数学计算，我用大白话解释一下：

1.  **20日最高/最低价 (h_20 / l_20)**
    *   **是什么**：就是过去一个月（约20个交易日）里出现过的最高和最低的价格。
    *   **为什么用**：这就像一个“天花板”和“地板”。冲破天花板通常意味着要大涨，跌破地板通常意味着要大跌。

2.  **上涨天数占比 (upvsdn)**
    *   **是什么**：数一数过去20天里，有多少天是红盘（涨）的，有多少天是绿盘（跌）的。
    *   **为什么用**：用来判断这波行情是不是“真材实料”。如果价格涨了，但大部分时间都在跌，那可能是假的；如果大部分时间都在涨，那趋势就很稳。

## 风险控制

这个策略非常注重保护自己，主要体现在：

1.  **分散投资**：它不会把钱全押在一个商品上，而是把钱分成几份，分散买入不同的商品。这样就算其中一个亏了，其他的可能还在赚。
2.  **严格止损**：一旦亏损达到3%，机器会自动卖出，绝不心存侥幸。这是量化交易最大的优点——没有感情，严格执行纪律。
3.  **保住利润**：如果赚了钱但价格开始回头跌（回撤8%），它也会卖出，防止“煮熟的鸭子飞了”。

## 总结

这个策略就像一个**“追星族”**：

它每天盯着7个明星商品，谁的人气（价格）突然创了新高，且最近表现一直很好，它就立马去“粉”它（买入）。一旦这个明星过气了（涨不动了），或者自己亏了一点点钱（3%），它就立刻“脱粉”（卖出）。

它不追求买在最低点，而是追求**买在涨势最确定的那一段**。