## 策略概述
这是一个基于**公司财务状况**来选股的策略。简单来说，它就像是给上市公司做一次“全身体检”，只挑选那些身体健康、各项指标都在变好的“优等生”股票进行投资，并且每个月都会重新检查一次。

## 策略的核心思路
这个策略的核心想法非常朴素：**基本面好的公司，股价更有可能上涨。**

你可以把选股想象成**挑选篮球队员**：
1. 首先，把受伤的（停牌）、刚入队的（新股）、表现太差面临淘汰的（ST股）先剔除掉。
2. 然后，看剩下队员的“体测数据”（财务报表）。
3. 我们不只看他现在跳得有多高，更看他**是不是比上一次跳得更高了**（关注指标的改善）。
4. 给每个队员打分，分数高的就选入我们的队伍。

## 具体操作步骤

### 第一步：初选（剔除不合格的股票）
在正式打分之前，策略会先进行一轮“海选”，把显然不适合投资的股票剔除。
*   **剔除“坏学生” (ST股)**：如果股票名字前带“ST”，说明公司经营出了问题，风险太大，直接不要。
*   **剔除“缺考生” (停牌股)**：如果股票今天没开市交易（停牌），买不到也卖不掉，直接跳过。
*   **剔除“新生” (次新股)**：如果公司上市还不到半年（180天），价格通常很不稳定，为了安全起见，也不要。

### 第二步：打分（给股票做体检）
这是策略最关键的部分。策略选取了几个关键的财务指标来给公司打分。虽然代码里用了英文缩写（如 `DELTA_ROE`），但我们可以这样理解它们：

*   **赚钱能力是否变强了？** (ROE, ROA)：看公司用同样的钱，是不是赚到了更多的利润。
*   **产品是不是更好卖了？** (Margin)：看产品的利润空间是不是变大了。
*   **资金周转是不是更快了？** (Turnover)：看公司做生意的效率是不是提高了。
*   **手里的现金是不是更充裕了？** (Liquidity)：看公司还债的能力是不是变强了。

**打分规则：**
策略采用了一种简单的“加分制”（代码中的 `sign` 函数）：
*   如果某个指标比以前**变好了**（数值大于0），就得 **1分**。
*   如果没变好，就得 **0分**。
*   最后把所有分数加起来，分数越高的股票，说明财务状况改善得越明显。

### 第三步：交易（买入和卖出）
*   **交易频率**：这个策略比较“懒”，它不会每天盯着盘面看。它设定为**每个月只交易一次**（代码中的 `run_monthly`）。
*   **买入时机**：每个月的第一个交易日，策略会根据最新的财务数据重新打分，买入那些分数最高的股票。
*   **卖出时机**：同样在每个月的第一个交易日，如果手里持有的股票分数变低了，或者有其他分数更高的股票出现了，策略就会把旧的卖掉，换成新的。这叫做“换仓”。

## 使用的工具/指标
策略主要使用了**财务因子**。你可以把它们理解为公司的“体检报告数据”：

1.  **ROE/ROA (净资产收益率/总资产收益率)**：衡量公司赚钱效率的指标。越高越好。
2.  **Margin (毛利率)**：卖一件商品能赚多少差价。越高说明产品越有竞争力。
3.  **Turnover (周转率)**：公司资产运作的速度。越快说明生意越红火。

策略特别关注这些指标的**变化值**（代码中带有 `DELTA` 前缀），也就是关注“**进步**”而不是单纯的“成绩”。

## 风险控制
为了防止亏大钱，策略做了一些保护措施：

1.  **分散风险**：策略参考了“中证500指数”（`000905.XSHG`），这意味着它倾向于选择中小盘股，而且通常会买入多只股票，不会把鸡蛋放在一个篮子里。
2.  **计算成本**：代码中详细设置了“手续费”和“滑点”（`set_commission`, `set_slippage`）。
    *   *通俗解释*：买卖股票是要给券商交钱的（手续费），而且实际成交的价格往往比你看到的报价要差一点点（滑点）。策略把这些成本都算进去了，确保回测结果更真实，不是“纸上富贵”。
3.  **避免作弊**：设置了“避免未来数据”（`avoid_future_data`）。这意味着策略在做决定时，只能用当时已经公开的信息，不能用“后眼”去偷看第二天的答案。

## 总结
这个“FFScore财务模型”策略就像一位**严格的老师**。它每个月检查一次全班同学（股票）的作业（财务报表）。它先踢掉那些表现极差或刚转学来的学生，然后重点奖励那些**成绩在不断进步**的学生。通过这种方式，它试图筛选出那些基本面正在变好的公司，长期持有以获得回报。