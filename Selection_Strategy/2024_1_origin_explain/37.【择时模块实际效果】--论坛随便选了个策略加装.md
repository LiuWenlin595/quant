## 策略概述
这是一个专门挑选**市值非常小**、且历史上**表现看似不太好**（但仍在赚钱）的股票进行投资的策略。简单来说，它在“垃圾堆”里找“黄金”，专门博取小盘股的反弹或爆发收益。

## 策略的核心思路
通常大家买股票都喜欢买“绩优股”（赚钱能力强、存钱多的大公司）。但这个策略反其道而行之。

它的核心想法是：**小市值的股票更容易被炒作，涨幅可能更大。**
它专门寻找那些长期以来赚钱能力不强、手里存钱也不多，但是**公司总市值非常小**，且**目前还在盈利**的公司。这些公司就像是被市场遗忘的角落，一旦有资金关注，价格很容易飞涨。

## 具体操作步骤

### 第一步：选股（如何选择要买的股票）
这是这个策略最核心的部分，它像一个漏斗一样层层筛选：

1.  **初步过滤**：
    *   去掉刚上市的新股（因为价格不稳定）。
    *   去掉风险特别大的股票（ST股，即快退市的股票）。
    *   去掉科创板和创业板的股票（可能是为了求稳，只在主板选）。

2.  **寻找“差生”中的“潜力股”**：
    它使用三个特殊的标准（因子）来筛选，每次都选排名**靠后（最低）**的10%：
    *   **标准A**：过去8年资产回报率很低的公司（长期赚钱能力差）。
    *   **标准B**：每股留存收益很少的公司（手里没存下什么钱）。
    *   **标准C**：非线性市值因子小（这是一个数学计算的规模指标，简单理解就是选规模小的）。

3.  **优中选优（关键一步）**：
    在上面筛选出的“差生”名单里，它加了两个硬性条件：
    *   **必须在赚钱**：每股收益（EPS）必须大于0，不能是亏损的企业。
    *   **越小越好**：在满足条件的公司里，只挑**市值最小**的前5名。

4.  **最终名单**：
    把上面三类标准选出来的股票合在一起，去重，最后整理出一份“小市值潜力股”名单。

### 第二步：买入（什么时候买入）
*虽然提供的代码在买入部分被截断了，但根据策略的设置（`g.stock_num = 10`）和常见的量化逻辑，我们可以推断：*

*   **买入时间**：每个交易日的早上 **9:40**。
*   **买入对象**：根据上面选出的名单，买入排名前 **10只** 股票。
*   **资金分配**：通常是平均分配资金，每只股票买一样的金额。

### 第三步：卖出（什么时候卖出）
*   **卖出逻辑**：策略每天都会重新选一次股。
    *   如果你手里持有的股票，不再属于最新的“前10名”名单了，就会被**卖出**。
    *   卖出后腾出来的钱，去买新进入名单的股票。
    *   这就相当于不断的“优胜劣汰”，始终手里拿着市值最小、最符合条件的那10只。

## 使用的工具/指标

为了帮你理解，这里把用到的专业指标翻译一下：

1.  **ROA (资产回报率)**：衡量公司用资产赚钱的能力。策略特意选**低**的，可能是为了找经营改善的空间，或者纯粹为了选出被低估的烂票。
2.  **Retained Earnings (留存收益)**：公司历年赚的钱没分红、没花掉存下来的部分。策略特意选**少**的。
3.  **Market Cap (市值)**：买下整个公司需要多少钱。策略的核心就是选**市值最小**的，因为小船好调头，稍微有点买盘股价就涨了。
4.  **EPS (每股收益)**：每一股股票能分到多少利润。策略要求这个必须是**正数**，保证公司至少没亏钱，这是安全底线。

## 风险控制

策略里设置了一些保护措施：

1.  **分散投资**：不是把钱全押在一只股票上，而是分散买入 **10只** 股票。这样万一某只股票暴雷，不会赔光所有钱。
2.  **不碰高危股**：自动过滤掉了ST（特别处理）股票，避免买到马上要退市的公司。
3.  **盈利底线**：要求公司必须有盈利（EPS>0），避免买到纯粹的空壳亏损公司。

## 总结
这是一个典型的**“小市值轮动策略”**。

你不需要关心公司是不是行业龙头，也不用管它未来发展规划。你只需要知道：**只要公司足够小，且没有亏损，它就有可能暴涨。** 策略每天都在市场上寻找这种“又小又被遗忘”的股票，买入一篮子（10只），如果不符合条件了就换新的，以此来赚取收益。