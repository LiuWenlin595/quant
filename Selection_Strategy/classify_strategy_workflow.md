# 策略按「策略主体+变种」归类处理流程

## 目标
将 2023–2025 年共 400 套策略，按**同一套策略的多个变种**维度归类到 `classify/` 下各子文件夹，每个子文件夹对应一个策略族（主体方法相同、实现/因子/择时等为变种）。

## 策略族定义（按主体方法）

| 策略族编号 | 策略族名称 | 主体方法简述 | 变种维度举例 |
|-----------|------------|--------------|--------------|
| 01 | 小市值与微盘股 | 定期买入市值最小的一批股票并持有、再调仓 | 基本面过滤、股息率、国九条、1/4月空仓、ML选股、微盘400/三正、止损 |
| 02 | ETF轮动 | 在ETF池内按动量等指标轮动持仓 | RSRS择时、EPO、相关性最小、多品种、核心资产、盘中止损 |
| 03 | 打板与龙头 | 围绕涨停/首板/连板/龙头交易 | 首板低开、集合竞价、弱转强、龙虎榜、二板排板、一进二 |
| 04 | 基本面价值选股 | 以财务/估值/股息等基本面选股（非以市值为核心） | 高股息、ROIC/ROE、F-Score、PEG、多因子、价值成长 |
| 05 | 择时策略 | 判断大盘/市场时机决定是否入场或仓位 | 大盘择时、RSRS、微盘扩散指数、拥挤率、情绪指数 |
| 06 | 技术指标与形态 | 以均线/MACD/布林/形态等技术分析交易 | 均线、MACD、布林、缠论、形态识别、海龟突破 |
| 07 | 趋势跟踪与动量 | 跟踪趋势或动量因子持仓 | 趋势永存、动量、强弱轮动 |
| 08 | 机器学习与AI | 用ML/AI模型做选股或择时 | 随机森林、SVR、XGBoost、DQN、BiLSTM、保形回归 |
| 09 | 行业板块轮动 | 按行业/板块强弱轮动 | 行业动量、热点概念、基金抱团 |
| 10 | 北向资金 | 以北向资金流向选股或择时 | 北向持股、净买入、北向+择时 |
| 11 | 期货与做空 | 期货或做空标的交易 | 期指、商品CTA、融券做空 |
| 12 | 超跌反弹 | 超跌后博反弹 | 超跌+ROE、创新低反弹 |
| 13 | 可转债 | 可转债双低等轮动 | 双低值、溢价率 |
| 14 | 资产配置与多策略组合 | 多资产或多策略组合、风控平衡 | 全天候、多策略整合、子账户分仓 |
| 15 | 其他 | 无法归入以上或描述不清 | - |

## 处理步骤

1. **从四批分类总结中解析 (批次, 编号, 策略名, 原分类)**
   - 2023_origin_explain/2023策略分类总结.md
   - 2024_1_origin_explain/2024_1策略分类总结.md
   - 2024_2_origin_explain/2024_2策略分类总结.md
   - 2025_origin_explain/2025策略分类总结.md
   - 解析每个「## N、分类名」下的表格，得到 编号、策略名称、原分类。

2. **原分类 → 策略族 映射规则**
   - 默认映射：龙头/打板→03, ETF轮动→02, 基本面选股→04, 技术指标→06, 趋势跟踪→07, 机器学习→08, 北向资金→10, 期货/股指期货→11, 超跌反弹→12, 可转债→13, 板块/行业轮动→09, 择时→05, 资产配置/多策略→14, 其他→15。
   - 重写规则：若 策略名称 或 核心方法 含「小市值」「微盘」「小盘」「菜场大妈」「股息率小市值」等，则改为 01（小市值与微盘股）。若含「超跌反弹」且原为龙头则改为 12。

3. **扫描所有策略文件**
   - 四个批次下 `*_origin_explain/*.md`、`*_origin_py/*.py`，排除「策略分类总结」「process_log」。
   - 从文件名提取编号：前导数字（如 `28.xxx`、`6国九` → 28、6）。

4. **分配策略族**
   - 用 (批次, 编号) 查表得到 原分类，再经映射得到 策略族；若无表则按文件名关键词推断或归入 15-其他。

5. **创建 classify 目录结构**
   - classify/<策略族编号>_<策略族名>/
   - 每个策略族下保留来源结构：2023_origin_explain, 2023_origin_py, 2024_1_origin_explain, 2024_1_origin_py, 2024_2_origin_explain, 2024_2_origin_py, 2025_origin_explain, 2025_origin_py；将对应 .md/.py 复制到该策略族下同名子目录。

6. **为每个策略族生成 README**
   - 说明该族**主体方法**；
   - 列出本族内各策略及**演进/变种**要点（因子、择时、风控、标的等）；
   - 列出所包含的原文件路径清单。

7. **未归类与排除**
   - 描述不清或无法判断主体方法的策略归入「其他」；若文档无明确策略方法则可不纳入归类（脚本中可标为「未纳入」并单独列表）。

## 输出
- `classify/`：各策略族子文件夹及其中 2023/2024_1/2024_2/2025 的 explain+py 文件。
- 每个策略族下的 `README.md`：主体方法 + 变种说明 + 文件清单。
- `classify/classification_report.csv`：每行 (批次, 编号, 文件名, 策略族, 原分类)，便于复核。
