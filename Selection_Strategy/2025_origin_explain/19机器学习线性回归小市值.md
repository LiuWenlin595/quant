你好！欢迎来到量化交易的世界。不用担心，这段代码看起来很复杂，充满了数学公式和英文缩写，但它的核心逻辑其实非常贴近生活。

你可以把这个策略想象成一个**“精明的星探”**，专门去挖掘那些**个头小、由于某些原因被低估、但潜力很大**的“明日之星”（股票）。

下面我为你详细拆解这个策略是如何工作的。

---

## 策略概述
这是一个**“小市值+人工智能打分”**的选股策略。简单来说，它每周一会自动挑选出 5 只**市值很小**（公司规模小）但**综合评分很高**的股票买入，并持有一周。

## 策略的核心思路
这个策略背后的想法是：
1.  **小船好调头**：在中国股市，历史上小市值的公司往往比大公司股价弹性更大，更容易暴涨。
2.  **不能只看小，还要看好**：光买小的容易踩雷（买到垃圾股），所以策略请了 5 位“AI 评委”（数学模型），从不同角度给股票打分。
3.  **分散投资**：不把鸡蛋放在一个篮子里，通过 5 种不同的标准选出 5 只股票，降低风险。

## 具体操作步骤

### 第一步：选股（如何选择要买的股票）
这个策略的选股过程就像是一场**选秀比赛**，每周进行一次：

1.  **海选（初筛）**：
    *   首先，把所有股票拿来。
    *   **剔除坏学生**：去掉“ST股”（经营出问题、有退市风险的股票）。
    *   **剔除新面孔**：去掉刚上市不久的新股。
    *   **剔除特殊班级**：去掉科创板和北交所的股票（这些板块波动规则不同）。

2.  **五位评委打分（核心逻辑）**：
    策略里设定了 **5 组不同的评分标准**（代码里的 `g.factor_list`），你可以理解为 5 位评委，每位评委关注的点不同：
    *   **评委 A**：关注大家的情绪（ARBR指标）和公司的管理费用。
    *   **评委 B**：关注股价过去一年的表现和公司的利润率。
    *   **评委 C**：关注股价是不是太低了，以及货卖得快不快（存货周转）。
    *   **评委 D**：关注欠债多不多（资产负债率）和销售增长。
    *   **评委 E**：关注成交量的变化和现金流。

    *这 5 位评委通过复杂的数学公式（线性回归系数），给股票打出一个“总分”。*

3.  **决赛圈（最终筛选）**：
    *   每位评委选出分数最高的 10% 的股票。
    *   **看身材（市值）**：在这些高分股票里，按**市值从小到大**排序。
    *   **看成绩（盈利）**：必须是赚钱的公司（EPS每股收益大于 0），亏钱的不要。
    *   **最终录取**：每位评委推荐 **1 只** 既是高分、又是小市值、且在赚钱的股票。
    *   **结果**：总共选出约 5 只股票。

### 第二步：买入（什么时候买入）
*   **时间**：每周一的早上 9:30（股市开盘时）。
*   **操作**：根据上面选出来的名单，把资金分成几份，买入这 5 只股票。

### 第二步：卖出（什么时候卖出）
*   **时间**：也是每周一的早上。
*   **逻辑**：
    *   策略会重新进行一次“选秀”。
    *   如果你手里的股票**不再**出现在新的“录取名单”里，就把它**卖掉**。
    *   **特例（人性化设计）**：如果某只股票昨天**涨停了**（涨了10%或20%，表现极好），策略会觉得它势头正猛，**暂时不卖**，多拿一天看看，防止卖飞了牛股。

## 使用的工具/指标
策略里用了很多英文缩写，其实都是衡量公司好坏的尺子。我挑几个最简单的解释一下：

1.  **市值 (Market Cap)**：公司的总身价。这个策略最喜欢“身价低”的公司，因为它们翻倍容易。
2.  **EPS (每股收益)**：公司每一股股票赚了多少钱。这是为了确保买的是正经做生意的公司，不是空壳。
3.  **换手率 (Turnover Rate)**：股票转手的频率。用来判断这只股票是不是有人气，是不是活跃。
4.  **线性回归系数 (Coefficients)**：代码里那一长串数字（如 `-0.0076...`）。这相当于“权重”。比如评委认为“利润”比“成交量”重要，就会给利润更高的权重分。

## 风险控制
这个策略有两个非常明显的“刹车”机制来保护你的钱：

1.  **四月不交易（避险）**：
    *   代码里写了 `today_is_between(context, '04-05', '04-30')` 时不交易。
    *   **为什么？** 因为每年 4 月是上市公司发年报的最后期限。很多业绩暴雷、亏损的公司会在这个时候公布坏消息，股价容易大跌。策略选择在这个“雷区”时间段**空仓休息**，躲避风险。

2.  **分散配置**：
    *   它不是只用一种逻辑选股，而是用了 5 种完全不同的逻辑（5组参数）。这就像投资了 5 个不同风格的基金经理，东方不亮西方亮，避免单一逻辑失效导致大亏。

## 总结
这个策略是一个**“聪明的小市值猎手”**。

它在每周一工作，利用 5 套数学模型给全市场的股票打分，专门挑选那些**评分高、还在赚钱、但市值很小**的股票买入。同时，它非常谨慎，会在每年 4 月份财报风险期**自动放假**，以保护本金安全。

它的目标是：抓住小公司成长为大公司的爆发期，赚取超额收益。